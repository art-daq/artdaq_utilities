<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>ARTDAQ Configuration Editor</title>
    <style>
        @import url(/base/jquery.mobile.css);
        @import url(/base/jqx.base.css);
        @import url(client.css);
    </style>
    <script src="/base/jquery.min.js"></script>
    <script src="/base/jquery.mobile.min.js"></script>
    <script src="/base/jqxcore.js"></script>
    <script src="/base/jqxbuttons.js"></script>
    <script src="/base/jqxscrollbar.js"></script>
    <script src="/base/jqxdatatable.js"></script>
    <script src="/base/jqxtreegrid.js"></script>
    <script src="/base/jqxformattedinput.js"></script>
    <script src="/base/jqxlistbox.js"></script>
    <script src="/base/jqxdropdownlist.js"></script>
    <script src="/base/jqxdata.js"></script>
    <script src="/base/jqxtooltip.js"></script>
    <script src="/base/jqxinput.js"></script>
    <script src="/base/AjaxPostAndGet.js"></script>
    <script src="client.js"></script>
</head>
<body>
    <div data-role="page">
        <div data-role="header" id="header">
            <h1>ARTDAQ Configuration Editor</h1>
            <p id="info"></p>
        </div>
        <div data-role="main" class="ui-content">
            <div class="tabs">
                <ul id="tabLinks" class="tab-links">
                    <li class="active configInfo-tab"><a href="#tab1">Information</a></li>
                </ul>

                <div id="tabContents" class="tab-content">
                    <div id="tab1" class="tab active">
                        <p>
                            Welcome to the ARTDAQ Configuration Editor<br />
                            Please Select a named configuration from the list below. It will load in additional top-level tabs.<br /><br />
                            If you have a number field which you wish to convert to a string (general-purpose) field, leave the field blank, select a different field,then go back.<br /><br />
                        </p>
                        <form>
                            <fieldset data-role="collapsible" data-collapsed="false" id="configLoad">
                                <legend>Select Configuration</legend>
                                <label for="configs">Configuration List</label>
                                <select name="configs" id="configs">
                                    <option value="Default">No Named Configurations Found</option>
                                </select>
                                <button type="button" id="loadConfigButton" onclick="loadConfig()">Load Selected Configuration</button>
                                <button type="button" id="reloadConfigsButton" onclick="getConfigList()">Reload Configurations</button>
                            </fieldset>
                            <fieldset data-role="collapsible" data-collapsed="true" id="configSave" data-disabled="true">
                                <legend>Save or Discard Changes</legend>
                                <div data-role="fieldcontain">
                                    <label for="configName">Configuration Name</label>
                                    <input type="text" name="configName" id="configName" class="triggersModified">
                                </div>
                                <button type="button" id="saveConfigButton" onclick="saveConfig()">Save Configuration</button>
                                <button type="button" id="discardConfigButton" onclick="discardConfig()">Discard Configuration Changes</button>
                            </fieldset>
                            <fieldset data-role="collapsible" data-collapsed="true" id="configMetadata" data-disabled="true">
                                <legend>Configuration Information</legend>
                                <div data-role="fieldcontain">
                                    <label for="masterChanges">All Changes Since Last Save</label>
                                    <textarea id="masterChanges" readonly style="height: auto;"></textarea>
                                </div>
                                <div data-role="fieldcontain">
                                    <label for="configurationEntities">Entities in Configuration</label>
                                    <div id="configurationEntities"></div>
                                </div>
                            </fieldset>
                            <fieldset data-role="collapsible" data-collapsed="true" id="newConfig">
                                <legend>Create New Configuration</legend>
                                <div data-role="fieldcontain">
                                    <label for="newConfigName">New Configuration Name</label>
                                    <input type="text" name="newConfigName" id="newConfigName">
                                </div>
                                <div data-role="fieldcontain">
                                    <label for="configurationPicker">Define New Configuration</label>
                                    <div id="configurationPicker"></div>
                                </div>
                                <div data-role="fieldContain">
                                    <label for="oldConfigName">Existing Configuration</label>
                                    <select name="oldConfigName" id="oldConfigName">
                                        <option value="Default">No Basis Configuration</option>
                                    </select>
                                    <button type="button" id="baseConfigButton" onclick="baseConfig()">Rebase New Configuration</button>
                                </div>
                                <div data-role="fieldcontain">
                                    <button type="button" id="saveNewConfigButton" onclick="saveNewConfig()">Save New Configuration</button>
                                </div>
                            </fieldset>
                            <fieldset data-role="collapsible" data-collapsed="true" id="exportFile">
                                <legend>Export FHiCL</legend>

                                <div data-role="fieldcontain">
                                    <label for="filePicker">Select Files to Export</label>
                                    <div id="filePicker"></div>
                                </div>
                                <div data-role="fieldContain">
                                    <label for="exportConfigName">Existing Configuration</label>
                                    <select name="exportConfigName" id="exportConfigName">
                                        <option value="Default">No Configuration Selected</option>
                                    </select>
                                    <button type="button" id="selectConfigElementsButton" onclick="baseExportConfig()">Select Configuration Elements</button>
                                </div>
                                <div data-role="fieldcontain">
                                    <button type="button" id="exportFileButton" onclick="exportFiles()">Export Files</button>
                                </div>
                            </fieldset>
                        </form>
                        <form enctype="multipart/form-data" id="uploadFileForm">
                            <fieldset data-role="collapsible" data-collpased="true" id="uploadFile">
                                <legend>Store FHiCL in Database</legend>
                                <div data-role="fieldcontain">
                                    <label for="fhiclFile">FHiCL File to Upload</label>
                                    <input type="file" id="fhiclFile"/>
                                    <!--<p>OR</p>
                                    <label for="localFile">Path to file on SERVER</label>
                                    <input type="text" id="localFile"/>-->
                                </div>
                                <div data-role="fieldcontain">
                                    <label for="newFileEntity">Entity</label>
                                    <input type="text" id="newFileEntity" />
                                    <label for="newFileCollection">Collection</label>
                                    <input type="text" id="newFileCollection"/>
                                    <label for="newFileVersion">Version</label>
                                    <input type="text" id="newFileVersion"/>
                                </div>
                                <button type="button" id="uploadFileButton" onclick="uploadFhiclFile()">Store Selected File In Database</button>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
