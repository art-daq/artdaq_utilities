<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>ARTDAQ Demo Configuration</title>
    <style>
        @import url(/base/jquery.mobile.css);
    </style>
    <script src="/base/jquery.min.js"></script>
    <script src="/base/jquery.mobile.min.js"></script>
    <script src="/base/AjaxPostAndGet.js"></script>
    <script src="/artdaq-configuration/ConfigurationEditor.js"></script>
</head>
<body>
    <div data-role="page">
        <div data-role="header" id="header">
            <h1>ARTDAQ Demo Configuration</h1>
            <p id="info"></p>
        </div>

        <div data-role="main" class="ui-content">
            <form>
                <fieldset data-role="collapsible">
                    <legend>Configuration Parameters</legend>
                    <label for="expertMode">Expert Mode<input type="checkbox" id="expertMode" unchecked></label>

                    <fieldset data-role="collapsible">
                        <legend>Named Configurations</legend>
                        <label for="configs">Configuration List</label>
                        <select name="configs" id="configs">
                            <option value="Default">No Named Configurations Found</option>
                        </select>
                        <button type="button" id="loadConfigButton">Load Selected Configuration</button>
                    </fieldset>

                    <div data-role="fieldcontain">
                        <label for="configName">Configuration Name</label>
                        <input type="text" name="configName" id="configName" class="triggersModified">
                    </div>
                    <button type="button" id="saveConfig">Save Configuration</button>
                </fieldset>
                <div data-role="collapsibleset">
                    <fieldset data-role="collapsible">
                        <legend>Board Readers</legend>
                        <div data-role="collapsibleset" id="brs">
                        </div>
                        <input type="button" data-inline="true" id="addbr" name="addbr" class="triggersRestart triggersModified" value="Add New">
                    </fieldset>
                    <fieldset data-role="collapsible">
                        <legend>Event Builders</legend>
                        <div data-role="fieldcontain">
                            <label for="evbName">Event Builder Base Nickname</label>
                            <input type="text" id="evbName" class="triggersModified triggersRestart" value="EVB">
                        </div>
                        <div data-role="fieldcontain">
                            <label for="evbCount">Number of Event Builders</label>
                            <input type="number" id="evbCount" class="triggersRestart triggersModified" value=2 step=1>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="evbCompress">Use Compression<input class="triggersModified" type="checkbox" id="evbCompress" unchecked></label>
                        </div>
                        <div data-role="fieldcontain" class="expert">
                            <label for="evbHostnames">Hosts to use for Event Builders (comma-delimeted)</label>
                            <input type="text" id="evbHostnames" name="evbHostnames" value="localhost" class="triggersModified triggersRestart">
                        </div>
                    </fieldset>
                    <fieldset data-role="collapsible">
                        <legend>Aggregators</legend>
                        <div data-role="collapsibleset" id="aggs">
                            <fieldset data-role="collapsible">
                                <legend>Data Logger</legend>
                                <label>Enabled<input type="checkbox" id="dlEnabled" class="triggersModified" checked></label>
                                <div data-role="fieldcontain" class="expert">
                                    <label for="dlName">Nickname of DataLogger Process</label>
                                    <input type="text" id="dlName" name="dlName" value="DataLogger" class="triggersModified triggersRestart">
                                </div>
                                <fieldset data-role="collapsible">
                                    <legend>SubRun Limit</legend>
                                    <div data-role="controlgroup" data-type="horizontal">
                                        <label><input type="radio" name="fileLimit" id="fileLimitEvents" value="Events" class="triggersModified" checked>File Events</label>
                                        <label><input type="radio" name="fileLimit" id="fileLimitTime" value="Time" class="triggersModified">File Time (s)</label>
                                        <label><input type="radio" name="fileLimit" id="fileLimitSize" value="Size" class="triggersModified">File Size (MB)</label>
                                    </div>
                                    <div data-role="fieldcontain">
                                        <label for="limitValue">Value (0 is disabled)<input type="number" name="limitValue" id="limitValue" class="triggersModified" value=0></label>
                                    </div>
                                </fieldset>
                                <fieldset data-role="collapsible">
                                    <legend>Run Limit</legend>
                                    <div data-role="controlgroup" data-type="horizontal">
                                        <label><input type="radio" name="runLimit" id="runLimitEvents" value="Events" class="triggersModified triggersRestart" checked>Run Events</label>
                                        <label><input type="radio" name="runLimit" id="runLimitTime" value="Time" class="triggersModified triggersRestart">Run Time (s)</label>
                                    </div>
                                    <div data-role="fieldcontain">
                                        <label for="runLimitValue">Value (-1 is disabled)<input type="number" name="runLimitValue" id="runLimitValue" class="triggersModified triggersRestart" value=0></label>
                                    </div>
                                </fieldset>
                            </fieldset>
                            <fieldset data-role="collapsible">
                                <legend>Online Monitor</legend>
                                <label>Enabled<input type="checkbox" id="omEnabled" class="triggersRestart triggersModified" checked></label>
                                <label>Use Viewer<input type="checkbox" id="omvEnabled" class="triggersModified" unchecked></label>
                                <div data-role="fieldcontain" class="expert">
                                    <label for="omName">Online Monitor Nickname</label>
                                    <input type="text" id="omName" name="omName" value="OnlineMonitor">
                                </div>
                            </fieldset>
                            <div data-role="fieldcontain" class="expert">
                                <label for="aggHostname">Hostname for Aggregators</label>
                                <input type="text" id="aggHostname" name="aggHostname" value="localhost" class="triggersModified triggersRestart">
                            </div>
                        </div>
                    </fieldset>
                    <fieldset data-role="collapsible">
                        <legend>System</legend>
                        <div data-role="fieldcontain" class="expert">
                        <label for="artdaqDir">ARTDAQ Base Directory</label>
                        <input type="text" name="artdaqDir" id="artdaqDir" class="triggersModified" value="$HOME/artdaq-demo-base">
                        </div>
                        <div data-role="fieldcontain">
                        <label for="artdaqDataDir">ARTDAQ Data Directory</label>
                        <input type="text" name="artdaqDataDir" id="artdaqDataDir" class="triggersModified" value="/tmp">
                        </div>
                        <div data-role="fieldcontain">
                        <label for="artdaqLogDir">ARTDAQ Log Directory</label>
                        <input type="text" name="artdaqLogDir" id="artdaqLogDir" class="triggersModified" value="/tmp">
                        </div>
                        <div data-role="fieldcontain" class="expert">
                        <label for="artdaqSetupScript">ARTDAQ Setup Script Name</label>
                        <input type="text" name="artdaqSetupScript" id="artdaqSetupScript" class="triggersModified" value="setupARTDAQDEMO">
                        </div>
                    </fieldset>
                </div>
            </form>
        </div>
    </div>
    <div id="rev"></div>
    <script> $.get("/dummy/GET_ServerVersion", function(data) { $("#rev").text("Server Revision: " + data); }); </script>
</body>
</html>
